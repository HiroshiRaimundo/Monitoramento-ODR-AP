# Ativar o motor de reescrita
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Redirecionar solicitações para arquivos .tsx para o manipulador PHP correspondente
  RewriteRule ^src/main\.tsx$ /src/main-tsx.php [L]
  
  # Não aplicar regras a arquivos existentes ou diretórios
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  
  # Para todas as outras requisições, reescreva para index.html (SPA React)
  RewriteRule . /index.html [L]
</IfModule>

# Configurar MIME types corretamente
<IfModule mod_mime.c>
  AddType application/javascript .js
  AddType application/javascript .mjs
  AddType application/javascript .tsx
  AddType application/javascript .jsx
  AddType application/json .json
  AddType text/css .css
  AddType image/svg+xml .svg
</IfModule>

# Definir cabeçalhos para arquivos específicos
<FilesMatch "\.(js|mjs|tsx|jsx)$">
  <IfModule mod_headers.c>
    Header set Content-Type "application/javascript"
    Header set X-Content-Type-Options "nosniff"
  </IfModule>
</FilesMatch>

<FilesMatch "\.(css)$">
  <IfModule mod_headers.c>
    Header set Content-Type "text/css"
  </IfModule>
</FilesMatch>

# Habilitar CORS
<IfModule mod_headers.c>
  Header set Access-Control-Allow-Origin "*"
  Header set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"
  Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization"
</IfModule>

# Desativar o cache para desenvolvimento
<IfModule mod_headers.c>
  Header set Cache-Control "no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires 0
</IfModule>
